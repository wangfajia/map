_jsload2&&_jsload2('panoramaflash', 't.extend(wa.prototype,{df:function(){this.pm=this.jg();this.Pc=o;this.Ee=new pg(this);this.OH();this.cG();this.dG();this.Gs();if(this.Ga||this.rb)this.Ga?this.nd(this.Ga,this.Gk):this.ga(this.rb)},Gs:function(){var a=this,b=this.Pf=K("div"),c=b.style;c.position="absolute";c.zIndex=1201;c.right=c.top="10px";c.width="17px";c.height="16px";c.background=\'url("\'+C.ca+\'st-close.png") no-repeat\';E()&&(c.width="25.5px",c.height="24px",c.backgroundSize="25.5px 24px");c.cursor="pointer";b.title="\\u9000\\u51fa\\u5168\\u666f"; b.onclick=function(){a.H()};c.display="none";this.C.appendChild(b)},dG:function(){var a=this;setInterval(function(){if(a.Ud()){var b=a.jg();b.gb(a.pm)||(a.Ee.set("size",{width:b.width,height:b.height}),a.pm=b,a.dispatchEvent(new M("size_changed")))}},80)},OH:function(){var a=this.Ee,b=this;a.addEventListener("interface_ready",function(){var a;if(b.Pc!==i&&(b.Pc=i,b.k.visible?b.show():b.H(),b.Ga=this.get("id"),b.Lm=this.get("links"),a=this.get("position"),b.rb?a.gb(b.rb)||this.set("position",a):b.rb= a,a=this.get("pov"),!b.Ha.heading&&!b.Ha.pitch?b.Ha=a:(a.heading!=b.Ha.heading||a.pitch!=b.Ha.pitch)&&this.set("pov",b.Ha),a=this.get("zoom"),1==!b.pc&&1!=a?b.pc==a:b.pc!=a&&this.set("zoom",b.pc),b.k.navigationControl===o&&this.set("navigationControlVisible",o),b.k.linksControl===o&&this.set("linksControlVisible",o),0<b.ff.length)){a=0;for(var d=b.ff.length;a<d;a++)b.ff[a].register(b.C,b,b.Ee);var e="",f=[];a=0;for(d=b.Sm.length;a<d;a++)e=b.Sm[a].AD,f=b.Sm[a].zD,b[e].apply(b,f)}});a.addEventListener("id_changed", function(a){b.Pc&&(b.Ga=a.data);b.dispatchEvent(new M("onid_changed"))});a.addEventListener("position_changed",function(a){b.Pc&&(b.rb=a.data);b.dispatchEvent(new M("onposition_changed"))});a.addEventListener("pov_changed",function(a){b.Pc&&(b.Ha=a.data);b.dispatchEvent(new M("onpov_changed"))});a.addEventListener("links_changed",function(a){b.Pc&&(b.Lm=a.data);b.dispatchEvent(new M("onlinks_changed"))});a.addEventListener("zoom_changed",function(a){b.Pc&&(b.pc=a.data);b.dispatchEvent(new M("onzoom_changed"))})}, cG:function(){var a=this;t.D(this.C,ha.R.of?"DOMMouseScroll":"onmousewheel",function(b){if(a.k.enableScrollWheelZoom&&a.k.visible){var c=-b.detail/3||b.wheelDelta/120,c=a.V()+c;a.ad(c);jb(b)}})},nd:function(a,b){if(!this.Pc||a&&a!=this.Ga)this.Pc||(this.Ga=a,this.Gk=b||"street",this.rb=n),this.Ee.set("id",{id:a,type:b||"street"})},ga:function(a){if(!this.Pc||a&&!this.rb.gb(a))this.Pc||(this.rb=a,this.Ga=n),this.Ee.set("position",a)},Ue:function(a){a&&!(a.heading===this.Ha.heading&&a.pitch===this.Ha.pitch)&& (90<a.pitch&&(a.pitch=90),-90>a.pitch&&(a.pitch=-90),this.Pc?this.Ee.set("pov",a):this.Ha=a)},ad:function(a){a!=this.pc&&(a>Wc&&(a=Wc),a<Xc&&(a=Xc),this.Pc?this.Ee.set("zoom",a):this.pc=a)},show:function(){if(this.k.visible!=i){this.Pf&&(this.B&&this.B.Ba()===this.C)&&t.A.show(this.Pf);var a=this.Ee.$t;a&&(a.style.position="relative",a.style.left="0");this.Pc&&this.Gi===this.Ud()&&this.Ee.set("id",{id:this.Gi,type:this.aI||"street"});this.k.visible=i;this.dispatchEvent(new M("onvisible_changed"))}}, H:function(){if(this.k.visible!=o){this.Pf&&t.A.H(this.Pf);this.Pc&&(this.Gi=this.Ga,this.aI=this.Gk,this.Ee.MB("closePano"));var a=this.Ee.$t;a&&(a.style.position="absolute",a.style.left="-9999px");this.k.visible=o;this.dispatchEvent(new M("onvisible_changed"))}},Eu:function(a){function b(a,b){return function(){a.Sm.push({AD:b,zD:arguments})}}if(this.Pc)a.register(this.C,this,this.Ee);else for(var c=a.getPanoMethodList(),d="",e=0,f=c.length;e<f;e++)d=c[e],this[d]=b(this,d);this.ff.push(a)},mx:function(a){this.Pc&& a.dispose();for(var b=this.ff.length;b--;)this.ff[b]===a&&this.ff.splice(b,1)},jg:function(){return new L(this.C.clientWidth,this.C.clientHeight)}});V=wa.prototype;U(V,{setId:V.nd,setPosition:V.ga,setPov:V.Ue,setZoom:V.ad,show:V.show,hide:V.H,addPlugin:V.Eu,removePlugin:V.mx});function qg(){this.pI=(this.Et=window.ActiveXObject&&!window.opera)?\' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"\':\' type="application/x-shockwave-flash"\';this.Vz=["id","width","height","align","data"];this.Wz="wmode movie flashvars scale quality play loop menu salign bgcolor base allowscriptaccess allownetworking allowfullscreen seamlesstabbing devicefont swliveconnect".split(" ")} t.extend(qg.prototype,{create:function(a,b){var c=this.fH(a);b&&"string"===typeof b&&(b=document.getElementById(b));b?b.innerHTML=c:document.write(c)},remove:function(a){if((a=this.BC(a))&&this.Et){a.style.display="none";for(var b in a)"function"===typeof a[b]&&(a[b]=n);window.qF&&setTimeout(window.qF,0)}a.parentNode.removeChild(a)},LL:function(){function a(){var c=function(){var a=navigator;if(a.plugins&&a.mimeTypes.length){if((a=a.plugins["Shockwave Flash"])&&a.description)return a.description.replace(/([a-zA-Z]|\\s)+/, "").replace(/(\\s)+r/,".")+".0"}else if(b.Et)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c)return c.GetVariable("$version").replace(/WIN/g,"").replace(/,/g,".")}catch(f){}}();a=function(){return c};return c}var b=this;return a()},BC:function(a){return document.getElementById(a)},Yy:function(a,b){for(var a=a.split("."),b=b.split("."),c=Math.max(a.length,b.length),d=0;d<c;d++){var e=a[d],f=b[d];if(!e||!f)return!e&&!f?0:e?1:-1;e=Number(e);f=Number(f);if(e<f)return-1;if(e>f)return 1}return 0}, fH:function(a){a=a||{};a.movie=a.url||"";a.altHtml=a.errorMessage||"";if(a.vars){var b=a.vars,c=[],d=n,e=n;for(d in b)e=b[d],c.push(d+"="+encodeURIComponent(e));a.flashvars=c.join("&")}a.minVer=a.ver;b=a.minVer;c=a.maxVer;if(b||c)if(d=this.LL(),!d||b&&0>this.Yy(d,b)||c&&0<this.Yy(d,c))return a.altHtml||"";d=["<object",this.pI];a.data=a.movie;for(b=0;b<this.Vz.length;b++)c=this.Vz[b],a.hasOwnProperty(c)&&d.push(" ",c,\'="\',a[c],\'"\');d.push(">");for(b=0;b<this.Wz.length;b++)c=this.Wz[b],a.hasOwnProperty(c)&& d.push(\'<param name="\',c,\'" value="\',a[c],\'"/>\');d.push("</object>");return d.join("")}});pg.eA=new Db;function pg(a){t.lang.ta.call(this,this.P);a&&(this.Q=a,this.Gg=n,this.hz=a.C.clientWidth,this.fz=a.C.clientHeight)}pg.MF=["http://pcsv0.map.bdimg.com/","http://pcsv1.map.bdimg.com/","http://pcsv2.map.bdimg.com/"];t.lang.ma(pg,t.lang.ta,"PanoramaFlashWraper"); t.extend(pg.prototype,{get:function(a){var b=n;"position"==a?(b=this.Gg.get("mercatorPosition"),b=Db.Ck.di(new O(b.mercatorX,b.mercatorY))):b=this.Gg.get(a);return b},set:function(a,b){var c=this;"position"==a?pg.eA.Ph(b,function(a){a&&a.id&&c.Q.nd(a.id)}):"id"==a?c.Gg==n?c.TH(c.Q):c.Gg.set&&c.Gg.set("panoOptions",{id:b.id,panoType:b.type,width:c.hz,height:c.fz}):c.Gg.set&&c.Gg.set(a,b)},MB:function(a,b){return this.Gg.doAction(a,b)},TQ:s("$t"),TH:function(a){var b=this,c=a.k.swfSrc.match(/^http:.*\\//)[0]+ "BDStreetScape.swf",d="",e="";"inter"===a.Gk?e=a.Ga:d=a.Ga;b.uk={pid:d,iid:e,panoType:a.Gk,heading:a.Ha.heading,pitch:a.Ha.pitch,width:this.hz,height:this.fz,panoUrl:c,panoTileUrl:pg.MF.join("|"),domain:Db.vy+"/",jsInterfaceNamespace:"BMap.PanoramaFlashInterface",swfIndex:this.P};pg.eA.WL(function(c){var d=a.k.swfSrc;c&&(c.panoUdt&&c.panoUdt.version&&b.uk)&&(b.uk.udtVersion=c.panoUdt.version);c&&(c.panoSwfAPI&&c.panoSwfAPI.version&&b.uk)&&(b.uk.panoUrl=b.uk.panoUrl+"?version="+c.panoSwfAPI.version, d=d+"?version="+c.panoSwfAPI.version);b.Gg=b.GG(a.C,b.uk,d)})},GG:function(a,b,c){var d=new qg,e="PanoramaFlash"+this.P,f=n,f=K("div");f.style.position="relative";f.id="PanoramaFlashWraper"+this.P;f.style.height="100%";f.style.width="100%";f.style.zIndex=1200;this.$t=f;a.appendChild(f);d.create({id:e,width:"100%",height:"100%",allowscriptaccess:"always",scale:"showall",wmode:"opaque",quality:"best",url:c,ver:"10.2",errorMessage:"\\u60a8\\u672a\\u5b89\\u88c5Flash Player\\u64ad\\u653e\\u5668\\u6216\\u8005\\u7248\\u672c\\u8fc7\\u4f4e", vars:b},f);return d.BC(e)}});var rg=pg.prototype;U(rg,{get:rg.get,set:rg.set,doAction:rg.MB}); ');
