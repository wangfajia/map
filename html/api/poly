_jsload2&&_jsload2('poly', 'function Od(a,b){Na.call(this);this.S=a;this.type=b;this.z={}}t.lang.ma(Od,Na,"Vertex"); t.extend(Od.prototype,{initialize:function(a){this.map=a;var b="",b=this.type?"BMap_vectex BMap_vectex_nodeT":"BMap_vectex BMap_vectex_node",c=this.bz=this.K=document.createElement("div");c.className=b;a.vf().xP.appendChild(c);this.Gt();return c},draw:function(){var a=this.map.Bf(this.S);this.bz.style.left=a.x-5+"px";this.bz.style.top=a.y-5+"px"},ga:function(a){a instanceof H&&(this.S=this.z.S=new H(a.lng,a.lat),this.draw())},ea:s("S"),Gt:function(){function a(a,b){b.pixel=b.Ta=a.Ta;b.point=b.S=a.S; return b}function b(a){var b=a.clientX,c=a.clientY;a.changedTouches&&(b=a.changedTouches[0].clientX,c=a.changedTouches[0].clientY);return new O(b,c)}if(this.K&&!this.K.Dg){this.K.Dg=i;var c=this.map,d=this,e=0,f=0,g=0,j={x:0,y:0};this.Dn=function(a){la(a);if(2!=a.button){d.Ei=i;var j=c.xb(d.S),m=b(a);e=m.x-j.x;f=m.y-j.y;g=Ia();d.map.F.lp=d;t.D(document,"mousemove",d.Zg);t.D(document,"mouseup",d.Yg);t.D(document,"touchmove",d.Zg);t.D(document,"touchend",d.Yg);d.K&&d.K.setCapture&&d.K.setCapture(); d.K.style.cursor=d.z.Cc;"touchstart"==a.type&&A(a)}};this.Zg=function(g){if(d.Ei){g=b(g);j=g=new O(g.x-e,g.y-f);d.dt=g;var l=d.map.Za(g),m={Ta:g,S:l};d.Ni=d.Oi=0;if(20>=g.x||g.x>=d.map.width-20||50>=g.y||g.y>=d.map.height-10){if(20>=g.x?d.Ni=8:g.x>=d.map.width-20&&(d.Ni=-8),50>=g.y?d.Oi=8:g.y>=d.map.height-10&&(d.Oi=-8),!d.yd)d.yd=setInterval(function(){c.Re(d.Ni,d.Oi,{noAnimation:i});var a=c.Za(d.dt);d.ga(a)},30)}else d.yd&&(clearInterval(d.yd),d.yd=n),d.ga(l);d.xi||(d.dispatchEvent(a(m,new M("ondragstart"))), d.xi=i);d.dispatchEvent(a(m,new M("ondragging")))}};this.Yg=function(){d.K&&d.K.releaseCapture&&d.K.releaseCapture();d.Ei=o;d.map.F.lp=n;t.rd(document,"mousemove",d.Zg);t.rd(document,"mouseup",d.Yg);t.rd(document,"touchmove",d.Zg);t.rd(document,"touchend",d.Yg);e=f=0;d.yd&&(clearInterval(d.yd),d.yd=n);if(100<=Ia()-g&&(2<j.x||2<j.y))d.xi=o,d.dispatchEvent(a({Ta:d.map.xb(d.ea()),S:d.ea()},new M("ondragend"))),j.x=j.y=0;d.Xi();d.K&&(d.K.style.cursor=d.z.Od?"pointer":"")};t.D(this.K,"mousedown",this.Dn); t.D(this.K,"touchstart",this.Dn)}}});t.extend(Kb.prototype,{initialize:function(a){a&&this.sp&&a.addEventListener("onmousemove",this.sp);a=Na.prototype.initialize.call(this,a);this.z.ue==i&&(this.Hh(),this.$i());return a},fm:function(){this.K=(this.ym=Pd.Mn(this.map)).Tk()},M:function(){function a(a,b){var c=a.srcElement||a.target,g=kb(),j=a.pageX?a.pageX:a.clientX+g[1],g=a.pageY?a.pageY:a.clientY+g[0];if(a&&b&&j&&g&&c){var c=t.lang.Uc(c.P).map,k=t.A.ea(c.za);b.Ta=new O(j-k.left,g-k.top);b.S=c.Za(b.Ta);b.pixel=b.Ta;b.point=b.S}return b} var b=this.K,c=this;"canvas"!=Pd.Mn(this.map).kl()&&!E()&&(c.z.Od&&(b.style.cursor="pointer",t.D(b,"click",function(b){c.Sz&&c.Sz.gb(c.map.Ea())&&c.dispatchEvent(a(b,x(new M("onclick"),b)))}),t.D(b,"dblclick",function(b){c.dispatchEvent(a(b,x(new M("ondblclick"),b)))}),(!t.R.of||4>t.R.of)&&t.D(this.K,"contextmenu",function(b){c.dispatchEvent(a(b,x(new M("onrightclick"),b)))})),t.D(b,"mousedown",function(b){c.dispatchEvent(a(b,x(new M("onmousedown"),b)));c.Sz=c.map.Ea()}),t.D(b,"mouseup",function(b){c.dispatchEvent(a(b, x(new M("onmouseup"),b)))}),t.D(this.K,"mouseup",function(b){c.dispatchEvent(a(b,x(new M("onmouseup"),b)));t.R.of>=4&&(b.button==2&&c.z.Od)&&c.dispatchEvent(a(b,x(new M("onrightclick"),b)))}));b=n;this.Dg||(this.Dg=i,this.sp=function(a){if(c.map&&!c.map.F.lp){var b=c.EH(a.S),f=parseFloat(b.ka),g;if(f<c.z.DD){g=c.xa.pr?new M("onmousemove"):new M("onmouseover");c.xa.dD=o;c.xa.pr=i}else if(!c.xa.dD&&c.xa.pr){g=new M("onmouseout");c.xa.pr=o;c.xa.dD=i}if(g){if(!(c instanceof Sb)&&g.type=="onmousemove"&& c.xa.pr==i&&(f==0||f>c.z.DD)){g.pixel=g.Ta=a.Ta;g.point=g.S=a.S}else{g.point=g.S=this.ZD(b.Ta);g.pixel=g.Ta=this.xb(g.S)}c.dispatchEvent(g)}}},this.map.addEventListener("onmousemove",this.sp),this.addEventListener("mouseover",p()),this.addEventListener("mouseout",p()))},draw:function(){this.K&&this.ym&&("canvas"==this.ym.Ab&&this.lu&&this.lu(),this.ym.qd(this.K,this.ot(this.ba)))},nc:function(){this.map&&(this.initialize(this.map),this.K.style.WebkitUserSelect="none",this.draw())},ot:function(a){var b= this.map,c=[];if(0==a.length||!this.K||!this.gh())return[c];if(!this.z.ue){var d=this.Dj(b.V());this.Ld[d]?a=this.Ld[d]:(a=Qd(a,this.Qh(b.V())),a=this.Ld[d]=a)}d=this.z.qP;c.push(b.Bf(a[0],n,d));for(var e=1,f=1,g=a.length;e<g;e++){var j=b.Bf(a[e],n,d);j.gb(c[f-1])||(c.push(j),f++)}return[c]},Dj:function(a){return this.z.Dj?this.z.Dj(a):6>a?0:10>a?1:15>a?2:3},Qh:function(a){return this.z.Qh?this.z.Qh(a):Kb.bx[this.Dj(a)]},an:function(a){this.Ld.length=0;a=Kb.Xq(a);this.Ok=a.slice(0,a.length-1);this.ba= a.slice(0);this.Mf();this.draw();this.dispatchEvent(new M("onlineupdate"))},qd:function(a){this.an(a);this.z.ue==i&&(this.Hh(),this.$i())},bk:function(a,b){b&&this.ba[a]&&(this.Ld.length=0,this.ba[a]=new H(b.lng,b.lat),this.Mf(),this.z.ue==i&&(this.Hh(),this.$i()),this.draw(),this.dispatchEvent(new M("onlineupdate")))},setStrokeColor:function(a){this.z&&(this.z.strokeColor=a);this.Si("strokecolor",a)},zo:function(a){0<a&&(this.z.Jf=a,this.Si("strokeweight",a),"dashed"==this.yC()&&(this.map&&"svg"== Pd.Mn(this.map).kl())&&this.Si("strokestyle","dashed"))},xo:function(a){a==aa||(1<a||0>a)||(this.z.We=a,this.map&&this.Si("strokeopacity",a))},Wr:function(a){1<a||0>a||(this.z.wj=a,this.Si("fillopacity",a))},yo:function(a){"solid"!=a&&"dashed"!=a||(this.z.strokeStyle=a,this.Si("strokestyle",a))},setFillColor:function(a){this.z.fillColor=a||"";this.Si("fillcolor",a)},Si:function(a,b){this.ym&&(this.ym.setAttribute(this.K,a,b||"",this.zC()),this.dispatchEvent(new M("onlineupdate")))},$i:function(){var a= this;if(!a.zb.length)for(var b=this.CC(),c=0,d=b.length;c<d;c++){var e=b[c],f=new Od(e.bb,e.Db);f.addEventListener("ondragging",function(b){a.Ip(b)});f.addEventListener("ondragstart",p());f.addEventListener("ondragend",function(b){a.Wt(b)});f.index=c;f.Db=e.Db;this.zb.push(f);this.map.$a(f)}},Hh:function(){for(var a;a=this.zb.pop();)this.map.uc(a),delete a;this.zb.length=0},CC:function(){for(var a=[],b=0,c=this.ba.length;b<c;b++){var d=this.ba[b];a.push({bb:d,Db:0});if(b<c-1){var e=this.ba[b+1],d= new H((d.lng+e.lng)/2,(d.lat+e.lat)/2);a.push({bb:d,Db:1})}}return this.Yb=a},ZP:p(),Wt:function(a){this.xa.Xg&&(this.map.uc(this.xa.Xg),delete this.xa.Xg);this.xa.tg&&(this.map.uc(this.xa.tg),delete this.xa.tg);this.xa.qg&&(this.map.uc(this.xa.qg),delete this.xa.qg);var b=a.S,a=a.currentTarget.index,c;if(0!=a%2){this.bt(a);this.hm(a,b,0);var d=this.Yb[a-1].bb;c=this.Yb[a+1].bb;d=this.Ln(d,b);c=this.Ln(b,c);this.hm(a,d,1);this.hm(a+2,c,1);a=Math.ceil(a/2);c=this.ba.slice();a=c.splice(a,this.ba.length- a);c[c.length]=b;c=c.concat(a)}else this.Yb[a].bb=b,0<=a-2&&(d=this.Yb[a-2].bb,d=this.Ln(d,b),this.zb[a-1].show(),this.zb[a-1].ga(d)),a+2<this.Yb.length&&(c=this.Yb[a+2].bb,c=this.Ln(b,c),this.zb[a+1].show(),this.zb[a+1].ga(c)),this instanceof Rb&&this.Yb.length-1==a&&(this.bt(0),this.hm(0,b,0),this.bt(1),this.hm(1,this.Ln(this.Yb[0].bb,this.Yb[1].bb),1),this.zb[0].K.style.zIndex="-10000000"),a/=2,this.ba.splice(a,1,b),this instanceof Rb&&this.ba.length-1==a&&this.ba.splice(0,1,b),c=this.ba;b=0;for(a= this.zb.length;b<a;b++)this.zb[b].index=b;this.ba=c;this.an(c)},hm:function(a,b,c){var d=this;this.Yb.splice(a,0,{bb:b,Db:c});b=new Od(b,c);b.addEventListener("ondragging",function(a){d.Ip(a)});b.addEventListener("ondragstart",p());b.addEventListener("ondragend",function(a){d.Wt(a)});b.index=a;b.Db=c;this.zb.splice(a,0,b);this.map.$a(b)},bt:function(a){this.map.uc(this.zb[a]);this.Yb.splice(a,1);this.zb.splice(a,1)},Ln:function(a,b){return new H((a.lng+b.lng)/2,(a.lat+b.lat)/2)},EH:function(a){var b, c,d,e,f,g,j=[],k=this.map.Bf(a),j=this.ot(this.ba)[0],l=j.length;if(1<l){for(e=1;e<l;e++){var m=j[e-1],q=j[e];if(m&&q){m.x!=q.x?(f=(q.y-m.y)/(q.x-m.x),f=Math.abs(f*k.x+(q.y-f*q.x)-k.y)/Math.sqrt(f*f+1)):f=Math.abs(k.x-q.x);var u=Math.pow(q.y-m.y,2)+Math.pow(q.x-m.x,2),q=Math.pow(q.y-k.y,2)+Math.pow(q.x-k.x,2),m=Math.pow(m.y-k.y,2)+Math.pow(m.x-k.x,2),v=Math.pow(f,2);q-v+m-v>u&&(f=Math.sqrt(Math.min(q,m)));if(b==n||b>f)c=Math.sqrt(m-v)/Math.sqrt(u),d=Math.sqrt(q-v)/Math.sqrt(u),b=f,g=e;b=Math.min(b, f)}}if(!(this instanceof Sb)){f=k=0;u=this.ba;for(e=0;e<l;e++)k=e==l-1?0:k+1,u[e].lat!=u[k].lat&&((a.lat>=u[e].lat&&a.lat<u[k].lat||a.lat>=u[k].lat&&a.lat<u[e].lat)&&a.lng<(u[k].lng-u[e].lng)*(a.lat-u[e].lat)/(u[k].lat-u[e].lat)+u[e].lng)&&f++;b=Math.min(b,0<f%2?0:b)}1<c&&(c=1);1<d&&(c=0);a=j[g-1].y-j[g].y;e=j[g-1].x-(j[g-1].x-j[g].x)*c;f=j[g-1].y-a*c}return{Ta:new O(e,f),ka:b}},show:function(){Na.prototype.show.call(this);this.draw();this.z.ue==i&&this.$i()},H:function(){Na.prototype.H.call(this); this.z.ue==i&&this.Hh()},remove:function(){Ib.prototype.remove.call(this);this.z.ue==i&&this.Hh()}});function Rd(a,b){var c={top:0,bottom:0,right:0,left:0,all:0},d=a.x,e=a.y;e<b.CD?(c.top=8,c.all+=c.top):e>b.xD&&(c.bottom=4,c.all+=c.bottom);d>b.wD?(c.right=2,c.all+=c.right):d<b.BD&&(c.left=1,c.all+=c.left);return c} function Qd(a,b){if(0==b)return a;for(var c=0,d=0,e=1,f=a.length-1;e<f;e++){var g;g=a[e];var j=a[0],k=a[a.length-1],l=j.lng-k.lng,k=j.lat-k.lat;0==l?g=Math.abs(g.lng-j.lng):0==k?g=Math.abs(g.lat-j.lat):(l=k/l,g=Math.abs(l*g.lng-g.lat+(j.lat-l*j.lng))/Math.sqrt(l*l+1));g>c&&(d=e,c=g)}g=[];if(c>=b){e=a.slice(0,d);f=a.slice(d,a.length);d=Qd(e,b);c=Qd(f,b);e=0;for(f=d.length;e<f;e++)g.push(d[e]);e=0;for(f=c.length;e<f;e++)g.push(c[e])}else g.push(a[0]),g.push(a[a.length-1]);return g} U(jd,{show:jd.show,hide:jd.H,remove:jd.remove,setPath:jd.qd,setPositionAt:jd.bk,setStrokeColor:jd.setStrokeColor,setStrokeWeight:jd.zo,setStrokeOpacity:jd.xo,setFillOpacity:jd.Wr,setStrokeStyle:jd.yo,setFillColor:jd.setFillColor});t.extend(Sb.prototype,{initialize:function(a){Kb.prototype.initialize.call(this,a);this.lu();return this.K},lu:function(){this.setFillColor("");this.setStrokeColor(this.z.strokeColor);this.zo(this.z.Jf);this.yo(this.z.strokeStyle);this.xo(this.z.We)},ot:function(a){var b=this.map,c=[];if(0==a.length||!this.K||!this.gh())return[c];if(!(E()&&5E3<a.length)&&!this.z.ue){var d=this.Dj(b.V());if(this.Ld[d])a=this.Ld[d];else var e=Qd(a,this.Qh(b.V())),a=this.Ld[d]=e}c.push(b.Bf(a[0]));for(var f=d=1,e=a.length;d< e;d++){var g=b.Bf(a[d]);g.gb(c[f-1])||(c.push(g),f++)}a=[];d=b.offsetX;e=b.offsetY;f=b.G.vv;b={BD:-d-f,CD:-e-f,wD:-d+f+b.width,xD:-e+f+b.height};d=0;for(e=c.length-1;d<e;d++){var j=c[d],k=c[d+1],f=b,l=g=o,m=o,j=new O(j.x,j.y),k=new O(k.x,k.y),q=Rd(j,f),u=Rd(k,f),v=aa,y=aa,z=aa,G=f.BD,w=f.CD,J=f.wD,D=f.xD;do 0==q.all&&0==u.all?m=g=i:0!=(q.all&u.all)?m=i:(v=0!=q.all?q:u,v.top?(y=j.x+(k.x-j.x)*(w-j.y)/(k.y-j.y),z=w):v.bottom?(y=j.x+(k.x-j.x)*(D-j.y)/(k.y-j.y),z=D):v.right?(z=j.y+(k.y-j.y)*(J-j.x)/(k.x- j.x),y=J):v.left&&(z=j.y+(k.y-j.y)*(G-j.x)/(k.x-j.x),y=G),l=i,v.all==q.all)?(j.x=Math.round(y),j.y=Math.round(z),q=Rd(j,f)):(k.x=Math.round(y),k.y=Math.round(z),u=Rd(k,f));while(!m);f=g?{bE:new O(j.x,j.y),cE:new O(k.x,k.y),clip:l?i:o}:aa;f&&a.push(f)}c=[[]];d=0;for(e=a.length;d<e;d++)a[d].clip?(c[c.length-1].push(a[d].bE),c[c.length-1].push(a[d].cE),a[d+1]&&a[d+1].clip&&c.push([])):(c[c.length-1].push(a[d].bE),d==a.length-1&&c[c.length-1].push(a[d].cE));return c},Ip:function(a){var b=a.currentTarget, c=a.S,d=b.index,e=this.Yb,f,g=a=n;if(0==d){var j=e[d+2].bb;f=[c,j];a=new H((j.lng+c.lng)/2,(j.lat+c.lat)/2);this.zb[d+1]&&this.zb[d+1].H()}else if(d==e.length-1){var k=e[d-2].bb;f=[k,c];a=new H((k.lng+c.lng)/2,(k.lat+c.lat)/2);this.zb[d-1]&&this.zb[d-1].H()}else k=e[d-1].bb,j=e[d+1].bb,f=[k,c,j],b.Db||(k=e[d-2].bb,j=e[d+2].bb,f=[k,c,j],a=new H((k.lng+c.lng)/2,(k.lat+c.lat)/2),g=new H((j.lng+c.lng)/2,(j.lat+c.lat)/2),this.zb[d-1]&&this.zb[d-1].H(),this.zb[d+1]&&this.zb[d+1].H());this.xa.Xg?(this.xa.Xg.qd(f), this.xa.Xg.show()):(b=new Sb(f,{strokeStyle:"dashed",strokeColor:this.z.strokeColor,Jf:this.z.Jf,We:this.z.We}),this.map.$a(b),b.H(),this.xa.Xg=b);!this.xa.tg&&a?(this.xa.tg=new Od(a,1),this.map.$a(this.xa.tg)):a&&this.xa.tg.ga(a);!this.xa.qg&&g?(this.xa.qg=new Od(g,1),this.map.$a(this.xa.qg)):g&&this.xa.qg.ga(g)}});t.extend(Rb.prototype,{initialize:function(a){Kb.prototype.initialize.call(this,a);this.setStrokeColor(this.z.strokeColor);this.zo(this.z.Jf);this.yo(this.z.strokeStyle);this.setFillColor(this.z.fillColor);this.xo(this.z.We);this.Wr(this.z.wj);return this.K},bk:function(a,b){this.Ok[a]&&(this.Ld.length=0,this.Ok[a]=new H(b.lng,b.lat),this.ba[a]=new H(b.lng,b.lat),0==a&&!this.ba[0].gb(this.ba[this.ba.length-1])&&(this.ba[this.ba.length-1]=new H(b.lng,b.lat)),this.Mf(),this.z.ue==i&&(this.Hh(),this.$i()), this.draw(),this.dispatchEvent(new M("onlineupdate")))},Ip:function(a){var b=a.currentTarget,c=a.S,d=b.index,e=this.Yb,f,g=a=n;if(0==d){var j=e[e.length-2].bb,k=e[d+2].bb;f=[j,c,k];b.Db||(a=new H((j.lng+c.lng)/2,(j.lat+c.lat)/2),g=new H((k.lng+c.lng)/2,(k.lat+c.lat)/2))}else d==e.length-1?(k=e[2].bb,j=e[d-2].bb,f=[j,c,k],b.Db||(a=new H((j.lng+c.lng)/2,(j.lat+c.lat)/2),g=new H((k.lng+c.lng)/2,(k.lat+c.lat)/2))):(j=e[d-1].bb,k=e[d+1].bb,f=[j,c,k],b.Db||(j=e[d-2].bb,k=e[d+2].bb,f=[j,c,k],a=new H((j.lng+ c.lng)/2,(j.lat+c.lat)/2),g=new H((k.lng+c.lng)/2,(k.lat+c.lat)/2),this.zb[d-1]&&this.zb[d-1].H(),this.zb[d+1]&&this.zb[d+1].H()));this.xa.Xg?this.xa.Xg.qd(f):(b=new Sb(f,{strokeStyle:"dashed",strokeColor:this.z.strokeColor,Jf:this.z.Jf,We:this.z.We}),this.map.$a(b),this.xa.Xg=b);!this.xa.tg&&a?(this.xa.tg=new Od(a,1),this.map.$a(this.xa.tg)):a&&this.xa.tg.ga(a);!this.xa.qg&&g?(this.xa.qg=new Od(g,1),this.map.$a(this.xa.qg)):g&&this.xa.qg.ga(g)}});U(ld,{setPositionAt:ld.bk});t.extend(Tb.prototype,{initialize:function(a){Rb.prototype.initialize.call(this,a);this.ba=this.qp(this.S,this.Fa);this.Mf();return this.K},we:function(a,b){a&&(this.Ld.length=0,b||(this.Yb=n),this.S=a,this.ba=this.qp(a,this.Fa),this.Mf(),this.draw(),this.dispatchEvent(new M("onlineupdate")))},Zr:function(a,b){isNaN(a)||(this.Ld.length=0,b||(this.Yb=n),this.Fa=Math.abs(a),this.ba=this.qp(this.S,this.Fa),this.Mf(),this.draw(),this.dispatchEvent(new M("onlineupdate")))},Qh:function(a){return this.z.Qh? this.z.Qh(a):Tb.bx[this.Dj(a)]},Ip:function(a){var b,a=a.currentTarget,c=this.Yb;b=c[0].bb;c=c[c.length-1].bb;0==a.index?(b=a.ea(),a=c):a=a.ea();this.Zr(P.Xv(b,a),i);this.we(b,i)},Wt:function(a){var a=a.currentTarget,b=a.index;this.Yb[0]={bb:this.S,Db:0};1==b&&(this.Yb[1]={bb:a.S,Db:0});this.Hh();this.$i()},CC:function(){if(!this.Yb){var a=[];a.push({bb:this.S,Db:0});a.push({bb:this.ba[Math.floor(3*this.ba.length/4)],Db:0});this.Yb=a}return this.Yb}});U(kd,{setCenter:kd.we,setRadius:kd.Zr});var Pd={Mn:function(a){Pd["_"+a.P]||(Pd["_"+a.P]={});if(E()&&Pd.YC())return Pd.iC(a);if(Pd.XM())return Pd.jM(a);if(Pd.YM())return Pd.sM(a);if(Pd.YC())return Pd.iC(a)},jM:function(a){Pd["_"+a.P].GA||(Pd["_"+a.P].GA=new B.KF(a));return Pd["_"+a.P].GA},sM:function(a){Pd["_"+a.P].OA||(Pd["_"+a.P].OA=new B.OF(a));return Pd["_"+a.P].OA},iC:function(a){Pd["_"+a.P].Uy||(Pd["_"+a.P].Uy=new B.pF(a));return Pd["_"+a.P].Uy},YM:function(){if(nb(Pd.HE))return Pd.HE;var a=rb();return Pd.HE=a},XM:function(){nb(Pd.GE)|| (Pd.GE=sb());return Pd.GE},YC:function(){nb(Pd.FE)||(Pd.FE=tb());return Pd.FE}};B.Yl=Pd; ');
